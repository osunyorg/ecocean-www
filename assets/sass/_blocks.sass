// top
.block
    &.block-categories,
    &.block-pages
        @include in-page-without-sidebar
            .top
                align-items: baseline
                display: flex
                gap: var(--grid-gutter)
                .block-title
                    @include h5
                    width: columns(4)
                    a
                        color: inherit
                    + .description
                        margin-top: 0
                .description
                    @include lead-sidebar
                    flex: 1
                    margin-left: 0
    &:first-child
        &[class*="--cards"]
            margin-top: 0 !important
    @include media-breakpoint-up(desktop)
        &:not(.block-call_to_action)
            .top
                margin-bottom: $spacing-5

// layout cards
.block[class*="--cards"]
    article,
    .card
        overflow: hidden
        border-radius: calc(#{$btn-border-radius} / 2)
        [class$="-title"] a:not(:hover)
            color: var(--color-text-alt)
        .media picture.is-png
            border-bottom-left-radius: 0
            border-bottom-right-radius: 0
        @include media-breakpoint-up(desktop)
            border-radius: $btn-border-radius

// categories
.block-categories,
.block-pages
    [class$="-title"]
        @include h3
        a
            color: var(--color-text-alt)
    .category-item
        &.ancestor-solutions
            .media
                @include media-solutions

.block-pages
    .page
        .media picture.is-png
            @include media-solutions
    
    &--cards
        background: var(--color-background-alt)
        padding-bottom: space(9)
        padding-top: space(9) !important
        .block-title
            @include h5
        .pages
            min-height: unset
            article
                background-color: $layout-cards-item-background
                .page-content
                    display: flex
                    flex: 1
                    flex-direction: column
                    .more
                        padding-top: $spacing-2
                        margin-top: auto
                    
        @include media-breakpoint-up(desktop)
            padding-bottom: $spacing-5
            padding-top: $spacing-5 !important

// timeline
.block-timeline
    &--horizontal
        .timeline-event 
            .title
                @include h4

// cta | call to action
.block-call_to_action
    &--no_background
        --cta-background-color: #{$color-background-alt}

    .call_to_action
        .top
            .block-title
                margin-bottom: space(8)
            .description p
                @include lead-sidebar

        figure img
            border-radius: 50%
    
    @include media-breakpoint-up(desktop)
        .call_to_action--with-image > div
            align-self: center

    @include in-page-with-sidebar
        .call_to_action > div
            border-bottom-left-radius: $btn-border-radius
            border-top-left-radius: $btn-border-radius

        &--accent_background
            .call_to_action--with-image
                > div
                    padding-top: $spacing-6
                figure picture
                    width: offset(2)

// key figures
.block-key_figures
    li
        .key-figure-text
            > span
                @include signature
            strong
                color: var(--color-text-alt)

    @include media-breakpoint-up(desktop)
        .top + ul
            margin-top: $spacing-5

// gallery
.block-gallery
    &--carousel
        .slider-progression
            color: var(--color-accent)

        @include in-page-without-sidebar
            background: none
        
        @include media-breakpoint-up(desktop)
            .slider-arrows
                margin-top: $spacing-3
    
    figure
        figcaption
            .credit
                color: var(--color-accent)

// files
.block-files
    .files
        li
            &::before
                --color-border: var(--color-text)
                border-radius: #{$btn-border-radius}
            figcaption
                color: var(--color-accent)
            picture img
                border-radius: #{$btn-border-radius}

// video
.block-video
    .lazy-video-player::after
        background-color: alphaColor($color-site-dark-blue, 0.9)
        mix-blend-mode: multiply
    .lazy-video-player__play
        height: pxToRem(72)
        width: pxToRem(72)
        border-color: alphaColor(var(--color-background), 0.5)
        &::before
            font-size: pxToRem(18)
            padding-top: pxToRem(1)
        &:hover::before
            color: $color-site-dark-blue

// organizations
.block-organizations
    &--map
        .map-filter-button.offcanvas-button
            @extend .button--small
            @extend .button--accent
            --btn-hover-background: var(--color-text)
            .block-organizations
        .map
            background-color: var(--color-accent)
            background-image: linear-gradient(180deg, $color-accent-alt 0%, $color-accent 100%)
            .leaflet-tile
                filter: grayscale(100%)
                mix-blend-mode: multiply
                opacity: 50% !important
                pointer-events: none
    &--grid
        .organization
            .media
                border: 1px solid transparent
                transition: all 0.3s
            &, &:not(.with-summaries)
                .organization-title
                    @include h4
            &:hover
                .media
                    border-color: var(--color-accent)

    &--large
        .organization
            align-items: center
            .organization-content
                .organization-title
                    font-size: var(--lead-size)
                    font-weight: $lead-weight
                    line-height: 106%
                    
                    @include media-breakpoint-down(xxl)
                        @include h3

// testimonials
.block-testimonials:has(.testimonials--carousel)
    figure
        figcaption
            margin-top: space(8) !important
            .meta
                color: var(--color-accent)
                margin-top: $spacing-1
    .slider-controls 
        --color-border: var(--color-text)
        .slider-pagination li::after
            background-color: $color-site-red
    .slider-autoplayer > button
        color: $color-site-red

    .page__home &:not(.block-titled)
        padding-bottom: space(9)
        padding-top: space(9)
        @include media-breakpoint-up(desktop)
            padding-bottom: $spacing-5
            padding-top: $spacing-5

    @include in-page-without-sidebar
        .testimonial
            padding-left: offset(2)
            padding-right: offset(2)
        .slider-controls
            margin-left: offset(2)
            margin-right: offset(2)
        figure.with-picture
            padding-top: calc(#{offset(1)} + #{space(8)})
            figcaption
                gap: var(--column-width)
                .avatar
                    left: offset(2)
                    margin-left: 0
                    margin-right: 0
                    width: offset(1)
                    
// projects & post colors
.block-projects,
.projects,
.block-posts,
.posts
    .project,
    .post
        [class$="-title"] a
            color: var(--color-text-alt)
        [class$="-subtitle"]
            color: var(--color-text)
        .meta time
            color: var(--color-accent)
        [class$="-categories"] a
            @include link($color-site-dark-red)
        [class$="-summary"],
        [class$="-categories"]
            margin-top: space(4)
        .media img
            aspect-ratio: 1.571

// projects
.block-projects,
.projects
    &--grid
        .project-content
            flex-direction: column
            gap: $spacing-1
        @include media-breakpoint-down(desktop)
            .project .media
                margin-left: 0
                margin-right: 0

// events
.block-agenda
    &--large
        .event
            &-title a
                font-weight: $h2-weight
                color: var(--color-text-alt)
            &-subtitle
                @include h3
                color: var(--color-text)
            &-schedule
                margin-bottom: $spacing-3 !important
                margin-top: $spacing-3
                .event-time
                    color: var(--color-accent)
            .media
                img
                    aspect-ratio: 1.375
            @include in-page-with-or-without-sidebar
                .event-subtitle
                    @include h3
                .event-dates
                    @include h4

.block-links
    .links > li
        border-radius: $btn-border-radius
        overflow: hidden